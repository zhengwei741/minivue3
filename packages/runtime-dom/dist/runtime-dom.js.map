{
  "version": 3,
  "sources": ["../../shared/src/shapeFlags.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/apiCreateApp.ts", "../../runtime-core/src/renderer.ts", "../src/nodeOps.ts", "../src/index.ts"],
  "sourcesContent": ["export const enum ShapeFlags {\r\n  ELEMENT = 1,\r\n  FUNCTIONAL_COMPONENT = 1 << 1,\r\n  STATEFUL_COMPONENT = 1 << 2,\r\n  TEXT_CHILDREN = 1 << 3,\r\n  ARRAY_CHILDREN = 1 << 4,\r\n  SLOTS_CHILDREN = 1 << 5,\r\n  TELEPORT = 1 << 6,\r\n  SUSPENSE = 1 << 7,\r\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\r\n  COMPONENT_KEPT_ALIVE = 1 << 9,\r\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\r\n}\r\n\r\nexport const isFunction = (val: unknown): val is Function =>\r\n  typeof val === 'function'\r\nexport const isString = (val: unknown): val is string => typeof val === 'string'\r\nexport const isObject = (val: unknown): val is Record<any, any> =>\r\n  val !== null && typeof val === 'object'\r\n", "import { ShapeFlags, isString, isFunction, isObject } from '@minivue/shared'\r\n\r\nexport function createVNode(type, children = null) {\r\n  const shapeFlag = isString(type)\r\n    ? ShapeFlags.ELEMENT //\r\n    : isObject(type)\r\n    ? ShapeFlags.STATEFUL_COMPONENT //\r\n    : isFunction(type)\r\n    ? ShapeFlags.FUNCTIONAL_COMPONENT //\r\n    : 0\r\n\r\n  return createBaseVNode(type, shapeFlag, children)\r\n}\r\n\r\nfunction createBaseVNode(type, shapeFlag, children = null) {\r\n  const vnode = {\r\n    el: null,\r\n    // TODO\r\n    type: Text,\r\n    shapeFlag,\r\n    // TODO\r\n    children: '123'\r\n  }\r\n  return vnode\r\n}\r\n\r\nexport const Text = Symbol('Text')\r\n\r\nexport function createTextVNode(text: string) {\r\n  return createVNode(Text, text)\r\n}\r\n", "import { createVNode } from './vnode'\r\n\r\nexport function createAppAPI(render) {\r\n  // app \u6839\u7EC4\u4EF6\r\n  return function createApp(rootComponent, rootProps = null) {\r\n    const app = {\r\n      mount(rootContainer) {\r\n        // mount('#app') \u5BB9\u5668\r\n        let vnode = createVNode(rootComponent)\r\n        render(vnode, rootContainer)\r\n      },\r\n      render() {}\r\n    }\r\n    return app\r\n  }\r\n}\r\n", "import { createAppAPI } from './apiCreateApp'\r\nimport { Text } from './vnode'\r\n\r\nconst NOOP = () => {}\r\n\r\nexport function createRenderer(options) {\r\n  const {\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    patchProp: hostPatchProp,\r\n    createElement: hostCreateElement,\r\n    createText: hostCreateText,\r\n    createComment: hostCreateComment,\r\n    setText: hostSetText,\r\n    setElementText: hostSetElementText,\r\n    parentNode: hostParentNode,\r\n    nextSibling: hostNextSibling,\r\n    setScopeId: hostSetScopeId = NOOP,\r\n    insertStaticContent: hostInsertStaticContent\r\n  } = options\r\n\r\n  function patch(n1, n2, container) {\r\n    if (n1 === n2) {\r\n      return\r\n    }\r\n\r\n    const { type, shapeFlag } = n2\r\n    switch (type) {\r\n      case Text:\r\n        processText(n1, n2, container)\r\n      default:\r\n        console.log(1)\r\n    }\r\n  }\r\n\r\n  function processText(n1, n2, container) {\r\n    if (n1 == null) {\r\n      hostInsert((n2.el = hostCreateText(n2.children as string)), container)\r\n    } else {\r\n      const el = (n2.el = n1.el!)\r\n      if (n2.children !== n1.children) {\r\n        hostSetText(el, n2.children as string)\r\n      }\r\n    }\r\n  }\r\n\r\n  function unmount() {}\r\n\r\n  function render(vnode, container) {\r\n    console.log('\u8C03\u7528patch')\r\n    patch(container.vnode || null, vnode, container)\r\n  }\r\n\r\n  return {\r\n    render,\r\n    createApp: createAppAPI(render)\r\n  }\r\n}\r\n", "// \u6D4F\u89C8\u5668 \u64CD\u4F5Cdom api\r\nexport const nodeOps = {\r\n  insert: (child, parent) => {\r\n    parent.insertBefore(child, null)\r\n  },\r\n  remove: (child) => {\r\n    const parent = child.parentNode\r\n    if (parent) {\r\n      parent.removeChild(child)\r\n    }\r\n  },\r\n  patchProp: () => {},\r\n  createElement: (tag) => document.createElement(tag),\r\n  createText: (text) => document.createTextNode(text),\r\n  createComment: (text) => document.createComment(text),\r\n  setText: (node, text) => (node.nodeValue = text),\r\n  setElementText: (el, text) => (el.textContent = text),\r\n  parentNode: (node) => node.parentNode as Element | null,\r\n  nextSibling: (node) => node.nextSibling,\r\n  querySelector: (selector) => document.querySelector(selector),\r\n  setScopeId(el, id) {\r\n    el.setAttribute(id, '')\r\n  },\r\n  insertStaticContent: () => {}\r\n}\r\n", "import { createRenderer } from '@minivue/runtime-core'\r\nimport { nodeOps } from './nodeOps'\r\nimport { isString } from '@minivue/shared'\r\n\r\nlet renderer\r\n// ensureRenderer\u5EF6\u65F6\u521B\u5EFArender\u51FD\u6570\r\n// \u5982\u679C\u53EA\u4F9D\u8D56\u4F9D\u8D56\u54CD\u5E94\u5F0F\u5305\uFF0C\u4F1A tree - shaking\u6389\u6E32\u67D3\u903B\u8F91\u76F8\u5173\u4EE3\u7801\r\nfunction ensureRenderer() {\r\n  return renderer || (renderer = createRenderer(nodeOps))\r\n}\r\n\r\nfunction normalizeContainer(\r\n  container: Element | ShadowRoot | string\r\n): Element | null {\r\n  if (isString(container)) {\r\n    const res = document.querySelector(container)\r\n    return res\r\n  }\r\n  return container as any\r\n}\r\n\r\nexport function createApp(...args) {\r\n  const app = ensureRenderer().createApp(...args)\r\n\r\n  const { mount } = app\r\n\r\n  app.mount = (containerOrSelector) => {\r\n    const container = normalizeContainer(containerOrSelector)\r\n    if (!container) return\r\n    container.innerHTML = ''\r\n\r\n    const proxy = mount(container, false)\r\n\r\n    return proxy\r\n  }\r\n\r\n  return app\r\n}\r\n\r\ncreateApp().mount('#app')\r\n"],
  "mappings": "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",
  "names": ["createApp"]
}
